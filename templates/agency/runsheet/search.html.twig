<table id="example2" class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>Id</th>
            <th>Numéro</th>
            <th>Agence</th>
            <th>Date de création</th>
            <th>Livreur</th>
            <th>Solde total</th>
            <th>Payé</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for runsheet in items %}
            <tr>
                <td>{{ runsheet.id }}</td>
                <td>N° {{ runsheet.code }}</td>
                <td>{{ runsheet.agency.name }} : {{ runsheet.agency.code }}</td>
                <td>{{ runsheet.createdAt|date("d/m/Y h:i") }}</td>
                <td>{{ runsheet.delivery.fullName }}</td>
                <td>{{ runsheet.totalPrice|number_format(3, ',', ' ') }}</td>
                <td>{{ runsheet.pay|number_format(3, ',', ' ') }}</td>
                <td><button type="button" class="btn btn-info btn-xs">{{ runsheet.status | trans }}</button></td>
                <td>                  
                    <a class="btn btn-primary btn-sm" title="Imprimer manifeste" onClick="printRunsheet({{ runsheet.id }});" href="#">
                        <i class="fas fa-print"> 
                        </i>
                    </a>
                    <a class="btn btn-success btn-sm" href="{{ path('app_runsheet_edit', {'id': runsheet.id}) }}">
                        <i class="fas fa-edit">
                        </i>
                    </a>
                    {# <div class="btn btn-sm">    
                         {{ include('shipper/manifest/_delete_form.html.twig') }}
                     </div>#}
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="7">no records found</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{{ include('partial/pagination.html.twig') }}

<div class="block_print" style="display: none">
    <!---------------------------- Print Runsheet --------------------------------->
    {% for key, runsheet in items %}
        <div class="form-property" id="print_runsheet_{{ runsheet.id}}">
            <table style="width: 100%">
                <tr>
                    <td><img src="{{ asset('assets/images/navex.png') }}" style="width: 130px; text-align: center"></td>
                    <td><div style="text-align: center;font-size: 26px; border: 1px solid #000; padding-left: 0px; margin-left: 0px; font-weight: bold;">Runsheet / Feuille de route N° {{ runsheet.code }}</div></td>
                    <td style="width: 25%"></td>
                </tr>
            </table>
            <table style="width: 100%;margin-top: 20px;margin-bottom: 20px;">
                <tr>
                    <td>
                        <div><b>Agence </b>: {{ runsheet.agency.name }}</div>
                        <div><b>Livreur </b>: {{ runsheet.delivery.fullName }}</div>
                    </td>
                    <td>

                    </td>
                    <td>
                        <div><b>Date </b>: {{ runsheet.createdAt|date("d/m/Y") }}</div>
                    </td>
                </tr>
            </table>
            <table border="1" style="width: 100%">
                <tr>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">T</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">CODE</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">N° BL</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">PRIX</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">DISPATCH</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">GOUVERNERAT</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">COORDONNEES CLIENT</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">DESIGNATION</th>
                </tr>
                {% set totalPrice = 0 %}
                {% for pickUp in runsheet.pickUps %}
                    <tr>
                        <td>
                            <div style="font-size: 20px;text-align: center; font-weight: bold;"> {{ pickUp.attempt }} </div>
                        </td>
                        <td>
                            <div style="font-size: 20px;text-align: center; font-weight: bold;"> {{ pickUp.barCode }} </div>
                        </td>
                        <td>
                            <div style="font-size: 20px;text-align: center; font-weight: bold;"> {{ pickUp.invoiceNumber }} </div>
                        </td>
                        <td>
                            <div style="text-align: center; font-weight: bold">{{ pickUp.price }}</div>
                        </td>
                        <td>{{ pickUp.agencyPickUp.name }} ==> {{ pickUp.agencyDestination.name }} </td>
                        <td>{{ pickUp.locality.city.region.name }}<br>{{ pickUp.locality.city.name }} {{ pickUp.locality.name }}</td>
                        <td>
                            <div style="padding-left: 5px;">{{ pickUp.fullName}}</div>
                            <div style="padding-left: 5px;">{{ pickUp.adresse}}</div>
                            <div style="padding-left: 5px;">{{ pickUp.tel}} *** {{ pickUp.tel2}}</div>
                        </td>
                        <td>{{ pickUp.designation}}</td>
                    </tr>
                    {% set totalPrice = totalPrice + pickUp.price %}
                {% endfor %}
                {% set nbrPickUps = runsheet.pickUps|length  %}
            </table>
            <table style="width: 100%;margin-top: 20px;margin-bottom: 20px;">
                <tr>
                    <td style="width: 60%">
                    </td>
                    <td> <div><b>Total: {{ nbrPickUps }}</b> colis </div></td>
                    <td> <div><b>Total: {{ totalPrice|number_format(3, ',', ' ') }} DT </div></td>
                </tr>
            </table>
        </div>
    {% endfor %}
    <!---------------------------- END Print Runsheet ----------------------------->
