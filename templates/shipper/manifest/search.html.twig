<table id="example2" class="table table-bordered table-hover">
    <thead>
        <tr>
            <th>Id</th>
            <th>Numéro</th>
            <th>Date de création</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for manifest in items %}
            <tr>
                <td>{{ manifest.id }}</td>
                <td>N° {{ manifest.id }}</td>
                <td>{{ manifest.createdAt|date("d/m/Y h:i") }}</td>
                <td>                  
                    <a class="btn btn-warning btn-sm" title="Imprimer manifeste" onClick="printManifest({{ manifest.id }});" href="#">
                        <i class="fas fa-print"> 
                        </i>
                    </a>
                    <a class="btn btn-success btn-sm" href="{{ path('app_manifest_edit', {'id': manifest.id}) }}">
                        <i class="fas fa-edit">
                        </i>
                    </a>
                    <a class="btn btn-primary btn-sm" title="Imprimer Bordereaux" onClick="printBordereau({{ manifest.id }});" href="#">
                        <i class="fas fa-print"> 
                        </i>
                    </a>
                    <div class="btn btn-sm">    
                        {{ include('shipper/manifest/_delete_form.html.twig') }}
                    </div>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="3">no records found</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{{ include('partial/pagination.html.twig') }}

<div class="block_print" style="display: none">
    <!---------------------------- Print Manifest --------------------------------->
    {% for manifest in items %}
        <div class="form-property" id="print_manifest_{{ manifest.id}}">
            <table style="width: 100%">
                <tr>
                    <td><img src="{{ asset('assets/images/navex.png') }}" style="width: 130px; text-align: center"></td>
                    <td><div style="text-align: center;font-size: 26px; border: 1px solid #000; padding-left: 0px; margin-left: 0px; font-weight: bold;">Manifeste / Feuille de route de {{ manifest.createdBy.fullName }}</div></td>
                    <td style="width: 25%"></td>
                </tr>
            </table>
            <table style="width: 100%;margin-top: 20px;margin-bottom: 20px;">
                <tr>
                    <td>
                        <div><b>Nom</b> : {{ manifest.createdBy.fullName }}</div>

                    </td><td>
                        <div><b>Adresse</b> : {{ manifest.createdBy.shipper.adresse }}</div>
                        <div><b>Téléphone</b> : {{ manifest.createdBy.tel }}</div>
                    </td><td>
                        <div><b>Code TVA</b> : {{ manifest.createdBy.shipper.vatCode }}</div>
                        <div><b>Date </b>: {{ manifest.createdAt|date("d/m/Y") }}</div></td>
                </tr>
            </table>
            <table border="1" style="width: 100%">
                <tr>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">CODE</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">N° BL</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">PRIX</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">DISPATCH</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">GOUVERNERAT</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">COORDONN&Eacute;ES CLIENT</th>
                    <th style="padding-top: 5px; padding-bottom: 5px; padding-left: 5px;">DESIGNATION</th>
                </tr>
                {% set totalPrice = 0 %}
                {% for pickUp in manifest.pickUps %}
                    <tr>
                        <td>
                            <div style="font-size: 20px;text-align: center; font-weight: bold;"> {{ pickUp.barCode }} </div>
                        </td>
                        <td>
                            <div style="font-size: 20px;text-align: center; font-weight: bold;"> {{ pickUp.invoiceNumber }} </div>
                        </td>
                        <td>
                            <div style="text-align: center; font-weight: bold">{{ pickUp.price }}</div>
                        </td>
                        <td>{{ pickUp.agencyPickUp.name }} ==> {{ pickUp.agencyDestination.name }} </td>
                        <td>{{ pickUp.locality.city.region.name }}<br>{{ pickUp.locality.city.name }} {{ pickUp.locality.name }}</td>
                        <td>
                            <div style="padding-left: 5px;">{{ pickUp.fullName}}</div>
                            <div style="padding-left: 5px;">{{ pickUp.adresse}}</div>
                        </td>
                        <td>{{ pickUp.designation}}</td>
                    </tr>
                    {% set totalPrice = totalPrice + pickUp.price %}
                {% endfor %}
                {% set nbrPickUps = manifest.pickUps|length  %}
            </table>
            <table style="width: 100%;margin-top: 20px;margin-bottom: 20px;">
                <tr>
                    <td style="width: 60%">
                    </td>
                    <td> <div><b>Total: {{ nbrPickUps }}</b> colis </div></td>
                    <td> <div><b>Total: {{ totalPrice|number_format(3, ',', ' ') }} DT </div></td>
                </tr>
            </table>
        </div>
    {% endfor %}
    <!---------------------------- END Print Manifest ----------------------------->

    <!--------------------------------------------- Print bordereaux------------------------------>
    <div>
        {% for manifest in items %}
            <div class="form-property" id="print_etiquette_{{ manifest.id }}">
                {% for key,pick_up in manifest.pickUps %}
                    <div class="form-property">
                        <page class="site-wrap js-site-wrap" size="A4">
                            <page size="A4">
                                <div class="center">
                                    <div class="container">
                                        <div class="row">
                                            <div class="listing listing--properties-list" style="width: 100%">

                                                <div class="listing__main">
                                                    <div class="form-property">

                                                        <table style="width: 100%">
                                                            <tr>
                                                                <td style="width: 40%;">
                                                                    <div style="font-size: 25px; margin-bottom: 0px; font-weight: bold;">Bordereau d'envoi</div>
                                                                    <div style="text-align: left;letter-spacing: 6px;">               
                                                                        <svg class="barcode"
                                                                             {#    jsbarcode-format="upc"#}
                                                                             jsbarcode-value="{{ pick_up.barCode }}"
                                                                             jsbarcode-textmargin="0"
                                                                             jsbarcode-fontoptions="bold">
                                                                        </svg>
                                                                    </div>
                                                                </td>
                                                                <td style="width: 20%;font-size: 30px; font-weight: bold; text-align: center">
                                                                    {{ pick_up.agencyDestination.code }}<br>
                                                                    {{ pick_up.agencyDestination.name }}
                                                                </td>
                                                                <td style="width: 40%;text-align: center"><table style="width: 100%;margin-top: 20px;margin-bottom: 5px;">
                                                                        <tr>
                                                                            <td style="width: 10%"></td>
                                                                            <td style="font-size: 17px; padding: 5px;text-align: left;">

                                                                                <div><b> Nom :</b> {{ pick_up.createdBy.fullName }}</div>

                                                                                <div><b>Expéditeur : {{ pick_up.createdBy.shipper.namePage }}</b></div>
                                                                                <div><b>Adresse : </b> {{ pick_up.createdBy.shipper.adresse }}</div>
                                                                                <div><b>Tél. : </b> {{ pick_up.createdBy.tel }}</div>

                                                                                <div><b>M/F : </b> {{ pick_up.createdBy.shipper.vatCode }}</div>

                                                                                <div><b>Code Agence : </b> {{ pick_up.agencyPickUp.code }}</div>
                                                                            </td>
                                                                            <td style="width: 20%"></td>
                                                                        </tr>
                                                                    </table></td>
                                                            </tr>
                                                        </table>
                                                        <table style="width: 100%">
                                                            <tr>
                                                                <td style="width: 10%;"></td>
                                                                <td style="width: 80%"><div style="text-align: center;font-size: 20px;border: 1px solid #000;padding-left: 0px;margin-left: 0px;font-weight: bold;margin-top: 3px;margin-bottom: 3px;">
                                                                        BON DE LIVRAISON N°  {{ pick_up.invoiceNumber }}
                                                                    </div></td>
                                                                <td style="width: 10%;text-align: center"></td>
                                                            </tr>
                                                        </table>

                                                        <table style="width: 100%;margin-top: 20px;margin-bottom: 5px;">
                                                            <tr>
                                                                <td style="width:30%">Date BLF : {{ pick_up.createdAt|date("m/d/Y h:i:s") }}

                                                                </td>
                                                                <td style="font-size: 17px; border: 1px solid #000; padding: 5px;">
                                                                    <div><b>NOM DE DESTINATAIRE:</b> {{ pick_up.fullName }}</div>
                                                                    <div><b>ADRESSE:</b>{{ pick_up.adresse }} {{ pick_up.locality.name }} : {{ pick_up.locality.city.name }}: {{ pick_up.locality.city.region.name }}
                                                                    </div>
                                                                    <div><b>TELEPHONE:</b> {{ pick_up.tel }}***{{ pick_up.tel2 }}</div>
                                                                </td>
                                                                <td style="width: 5%"></td>
                                                            </tr>
                                                        </table>


                                                        <table border="1" style="width: 100%;margin-top: 20px;margin-bottom: 5px;font-size: 15px;">
                                                            <tr>
                                                                <th style="width: 60%; text-align: center">Désignation</th>
                                                                <th style="width: 10%;text-align: center">Nombre d'article</th>

                                                                <th style="width: 15%; text-align: center">Montant Total</th>
                                                            </tr>
                                                            <tr>
                                                                <td style="padding: 10px"> {{ pick_up.designation }}<br>
                                                                </td>
                                                                <td style="padding: 10px; text-align: center">{{ pick_up.numberItem }}
                                                                </td> 
                                                                <td style="padding: 10px; text-align: center">{{ pick_up.price|number_format(3, ',', ' ') }} DT
                                                                </td>
                                                            </tr>
                                                        </table>

                                                        <div style="text-align: right">
                                                            <table border="1" style="width: 50%;margin-top: 2px;margin-bottom: 2px; font-size: 20px">
                                                                <tr>
                                                                    <td>Total en TTC</td>
                                                                    <td>{{ pick_up.price|number_format(3, ',', ' ') }} DT</td>
                                                                </tr>
                                                            </table>
                                                            <table border="1" style="width: 100%;margin-top: 20px;margin-bottom: 5px; font-size: 20px">
                                                                <tr>
                                                                    <td> {{ pick_up.paymentMethod | trans }} </td>
                                                                    <td>Ouvrir le colis : {{ pick_up.openPack ? 'Oui' : 'Non' }}</td>
                                                                </tr>
                                                            </table>

                                                            <div style="text-align: center; font-size: 20px;font-weight: bold; color:red">
                                                                {% if pick_up.exchange == true  %}
                                                                    COLIS ECHANGE
                                                                {% endif %}
                                                            </div>
                                                            <br>
                                                            <br>
                                                            <br>
                                                            <br>
                                                            <br>
                                                            <div style="text-align: center;font-size: 15px;margin-top: 0rem;">
                                                                Société de Livraison : Navex Delivery<br>
                                                                Adresse : Rue de l'Energie Atomique, Charguia 1 Tunis<br>
                                                                MF : 1813348F
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                            </page>
                        </page>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
    <!--------------------------------------------- END Print bordereaux------------------------------>
</div>